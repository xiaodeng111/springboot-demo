<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.clockin.dao.INewsDao">
	
	<!-- 根据编号查询新闻发现信息 -->
	<select id="findNewsById" parameterType="int" resultType="newsBo">
		select * from `news` where ID = #{_parameter}
	</select>

	<!-- 分页查询新闻发现列表 -->
	<select id="findListByPage" resultType="newsBo">
		select `ID`, `NAME`,`IMGE_URL`,`JUMP_URL`,`DESC_INTRODUCTION`,`ODER_NUM`,`STATUS`,`TYPE`,
		`CREATE_TIME` from `news`
		<where>
		<if test="null != param.name and '' != param.name">
			`name` = #{param.name}
		</if>
		<if test="null != param.status ">
			and `STATUS` = #{param.status}
		</if>
		<if test="null != param.type ">
			and `TYPE` = #{param.type}
		</if>
		</where>
		order by ID desc
	</select>
	
	<!-- 添加新闻发现 -->
	<insert id="doAddNews" parameterType="newsBo">
		insert into `news` (
			`NAME`, 
			`IMGE_URL`, 
			`JUMP_URL`, 
			`DESC_INTRODUCTION`, 
			`CONTENT`, 
			`ODER_NUM`, 
			`STATUS`, 
			`TYPE`, 
			`CREATE_TIME`
		) values 
		(
			#{name}, 
			#{imgeUrl}, 
			#{jumpUrl}, 
			#{descIntroduction}, 
			#{content}, 
			#{oderNum}, 
			#{status}, 
			#{type}, 
			#{createTime}
		)
		<selectKey keyProperty="id"  resultType="java.lang.Integer">
			select last_insert_id() as id from `news` limit 1
		</selectKey>
	</insert>
		
	<!-- 编辑新闻发现 -->
	<update id="doEditNews" parameterType="newsBo">
		update `news` 
		<set> 
			<if test="null != name and '' != name">
				`NAME` = #{name},
			</if>
			<if test="null != imgeUrl and '' != imgeUrl">
				`IMGE_URL` = #{imgeUrl},
			</if>
			<if test="null != jumpUrl and '' != jumpUrl">
				`JUMP_URL` = #{jumpUrl},
			</if>
			<if test="null != descIntroduction and '' != descIntroduction">
				`DESC_INTRODUCTION` = #{descIntroduction},
			</if>
			<if test="null != content and '' != content">
				`CONTENT` = #{content},
			</if>
			<if test="null != oderNum ">
				`ODER_NUM` = #{oderNum},
			</if>
			<if test="null != status ">
				`STATUS` = #{status},
			</if>
			<if test="null != type ">
				`TYPE` = #{type},
			</if>
		</set>
        where ID = #{id}
	</update>
	
	<!-- 根据编号删除新闻发现 -->
	<delete id="doDelNews" parameterType="int">
		delete from `news` where ID = #{_parameter}
	</delete>

</mapper>