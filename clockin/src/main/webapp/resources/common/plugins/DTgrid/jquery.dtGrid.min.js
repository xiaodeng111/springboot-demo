!function($){$.fn.DtGrid={init:function(options,name){for(var i=0;i<options.columns.length;i++)options.columns[i]=$.extend({},$.fn.DtGrid.defaultOptions.column,options.columns[i]);options=$.extend({},$.fn.DtGrid.defaultOptions.grid,options),options.id||(options.id=$.fn.DtGrid.tools.guid()),$.fn.DtGrid.lang[options.lang]||(options.lang="en");var dtGridObject={init:{toolsIsInit:!1,printWindowIsInit:!1,exportWindowIsInit:{},fastQueryWindowIsInit:!1,advanceQueryWindowIsInit:!1},pager:{pageSize:0,startRecord:0,nowPage:0,recordCount:0,pageCount:0},option:options,originalDatas:null,baseDatas:null,exhibitDatas:null,sortParameter:{columnId:"",sortType:0},sortOriginalDatas:null,parameters:null,fastQueryParameters:null,fastQueryOriginalDatas:null,advanceQueryParameter:{advanceQueryConditions:null,advanceQuerySorts:null},printColumns:null,exportColumns:null,exportDatas:null,load:function(){var t=this;if(t.showProcessBar(),0==t.init.toolsIsInit){if(t.init.toolsIsInit=!0,t.constructGridToolBar(),t.pager.pageSize=t.option.pageSize,t.pager.startRecord=0,t.pager.nowPage=1,!t.option.ajaxLoad)return void t.hideProcessBar(function(){t.originalDatas=t.option.datas,t.originalDatas=t.originalDatas?t.originalDatas:new Array,t.baseDatas=t.originalDatas.slice(0,t.originalDatas.length),t.pager.recordCount=t.baseDatas.length,t.pager.pageCount=Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1,t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize),t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length),t.constructGrid(),t.constructGridPageBar()});if(t.option.loadAll){var o=t.option.loadURL;return void $.ajax({type:"post",url:o,data:null,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(t){t.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(o){t.hideProcessBar(function(){t.originalDatas=$.parseJSON(o),t.originalDatas=t.originalDatas?t.originalDatas:new Array,t.baseDatas=t.originalDatas.slice(0,t.originalDatas.length),t.pager.recordCount=t.baseDatas.length,t.pager.pageCount=Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1,t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize),t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length),t.constructGrid(),t.constructGridPageBar()})},error:function(){t.hideProcessBar(function(){$.fn.DtGrid.tools.toast($.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3),t.constructGrid(),t.constructGridPageBar()})}})}}if(!t.option.ajaxLoad||t.option.loadAll)t.hideProcessBar(function(){(t.fastQueryParameters||t.advanceQueryParameter)&&(t.baseDatas=t.originalDatas,t.fastQueryParameters&&(t.baseDatas=t.doFaseQueryDatasFilter(t.baseDatas,t.fastQueryParameters)),t.advanceQueryParameter&&(t.baseDatas=t.doAdvanceQueryDatasFilter(t.baseDatas,t.advanceQueryParameter))),t.pager.recordCount=t.baseDatas.length,t.pager.pageCount=0==t.pager.recordCount?0:Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1,t.pager.nowPage>t.pager.pageCount&&(t.pager.nowPage=t.pager.pageCount,t.pager.startRecord=t.pager.pageSize*(t.pager.nowPage-1)),t.pager.startRecord=t.pager.pageSize*(t.pager.nowPage-1),0==t.baseDatas.length&&(t.pager.nowPage=1,t.pager.startRecord=0),t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize),t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length),t.constructGrid(),t.constructGridPageBar()});else{var o=t.option.loadURL,e=new Object;e.isExport=!1,e.pageSize=t.pager.pageSize,e.startRecord=t.pager.startRecord,e.nowPage=t.pager.nowPage,e.recordCount=t.pager.recordCount?t.pager.recordCount:-1,e.pageCount=t.pager.pageCount?t.pager.pageCount:-1,e.parameters=t.parameters?t.parameters:new Object,e.fastQueryParameters=t.fastQueryParameters?t.fastQueryParameters:new Object,e.advanceQueryConditions=t.advanceQueryParameter&&t.advanceQueryParameter.advanceQueryConditions?t.advanceQueryParameter.advanceQueryConditions:new Array,e.advanceQuerySorts=t.advanceQueryParameter&&t.advanceQueryParameter.advanceQuerySorts?t.advanceQueryParameter.advanceQuerySorts:new Array;var i=new Object;i.dtGridPager=JSON.stringify(e),$.ajax({type:"post",url:o,data:i,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(t){t.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(o){return o=$.parseJSON(o),o.isSuccess?void t.hideProcessBar(function(){t.exhibitDatas=o.exhibitDatas,t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length),t.pager.pageSize=o.pageSize,t.pager.startRecord=o.startRecord,t.pager.nowPage=o.nowPage,t.pager.recordCount=o.recordCount,t.pager.pageCount=o.pageCount,t.constructGrid(),t.constructGridPageBar()}):($.fn.DtGrid.tools.toast($.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3),void t.hideProcessBar())},error:function(){t.hideProcessBar(function(){$.fn.DtGrid.tools.toast($.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3),t.constructGrid(),t.constructGridPageBar()})}})}},constructGrid:function(){var t=this,o=t.getExtraColumnClass(),e="";if(e+='<table class="dt-grid '+t.option.tableClass+'" id="dt_grid_'+t.option.id+'" style="'+t.option.tableStyle+'">',0!=t.option.showHeader){var i=t.option.columns;e+="<thead>",e+='	<tr class="dt-grid-headers">',e+='		<th class="extra-column '+o+'"></th>',t.option.check&&(e+='	<th class="check-column"><input type="checkbox" id="dt_grid_'+t.option.id+'_check" value="check"></th>');for(var n=0;n<i.length;n++)e+='	<th columnNo="'+n+'" columnId="'+i[n].id+'" class="dt-grid-header '+t.getColumnClassForHide(i[n])+" "+i[n].headerClass+' can-sort" style="'+i[n].headerStyle+'">',t.sortParameter&&t.sortParameter.columnId&&t.sortParameter.columnId==i[n].id&&("1"==t.sortParameter.sortType&&(e+='<span class="dt-grid-sort">'+$.fn.DtGrid.lang[t.option.lang].sortColumn.asc+"</span>"),"2"==t.sortParameter.sortType&&(e+='<span class="dt-grid-sort dt-grid-sort-desc">'+$.fn.DtGrid.lang[t.option.lang].sortColumn.desc+"</span>")),e+="		"+i[n].title,e+="	</th>";e+="	</tr>",e+="</thead>"}if(e+="	<tbody>",null!=t.exhibitDatas){t.sortParameter&&t.sortParameter.columnId&&(t.exhibitDatas=0!=t.sortParameter.sortType?t.exhibitDatas.sort(function(o,e){var i=o[t.sortParameter.columnId],n=e[t.sortParameter.columnId];if(i&&n){if(!isNaN(i)&&!isNaN(n)){if(1==t.sortParameter.sortType)return i-n;if(2==t.sortParameter.sortType)return n-i}if(i instanceof Date&&n instanceof Date){if(1==t.sortParameter.sortType)return i.getTime()-n.getTime();if(2==t.sortParameter.sortType)return n.getTime()-i.getTime()}if(1==t.sortParameter.sortType)return i.localeCompare(n);if(2==t.sortParameter.sortType)return n.localeCompare(i)}return 0}):t.sortOriginalDatas.slice(0,t.sortOriginalDatas.length));for(var n=0;n<t.exhibitDatas.length;n++){e+='	<tr class="dt-grid-row" dataNo="'+n+'">',e+='		<td class="extra-column extra-column-event '+o+'" dataNo="'+n+'">'+$.fn.DtGrid.lang[t.option.lang].extraColumn.open+"</td>",t.option.check&&(e+='	<td class="check-column text-center"><input type="checkbox" dataNo="'+n+'" id="dt_grid_'+t.option.id+"_check_"+n+'" class="dt-grid-check" value="'+n+'"></td>');for(var i=t.option.columns,a=0;a<i.length;a++){e+='	<td dataNo="'+n+'" columnNo="'+a+'" class="dt-grid-cell '+t.getColumnClassForHide(i[a])+" "+i[a].columnClass+'" style="'+i[a].columnStyle+'">';var r=t.exhibitDatas[n][i[a].id];r=null==r?"":r,e+=i[a].resolution?i[a].resolution(r,t.exhibitDatas[n],i[a],t,n,a):t.formatContent(i[a],r),e+="	</td>"}e+="	</tr>",e+='	<tr id="dt_grid_'+t.option.id+"_extra_columns_"+n+'" class="dt-grid-extra-columns hidden">',e+='		<td dataNo="'+n+'" colspan="'+(i.length+1+(t.option.check?1:0))+'">';for(var a=0;a<i.length;a++)if(0!=i[a].extra){e+='		<p dataNo="'+n+'" columnNo="'+a+'" class="dt-grid-cell '+t.getExtraColumnClassForHide(i[a])+'">',e+="			"+i[a].title+" : ";var r=t.exhibitDatas[n][i[a].id];r=null==r?"":r,e+=i[a].resolution?i[a].resolution(r,t.exhibitDatas[n],i[a],t,n,a):t.formatContent(i[a],r),e+="		</p>"}e+="		</td>",e+="	</tr>"}}e+="	</tbody>",e+="</table>",$("#dt_grid_"+t.option.id).remove(),$("#"+t.option.gridContainer).append(e);var d=t.option.id;t.option.onCellClick&&$("#dt_grid_"+d+" .dt-grid-cell").click(function(o){t.bindCellEvent(t.option.onCellClick,this,o)}),t.option.onCellDblClick&&$("#dt_grid_"+d+" .dt-grid-cell").dblclick(function(o){t.bindCellEvent(t.option.onCellDblClick,this,o)}),t.option.onCellMouseOver&&$("#dt_grid_"+d+" .dt-grid-cell").mouseover(function(o){t.bindCellEvent(t.option.onCellMouseOver,this,o)}),t.option.onCellMouseMove&&$("#dt_grid_"+d+" .dt-grid-cell").mousemove(function(o){t.bindCellEvent(t.option.onCellMouseMove,this,o)}),t.option.onCellMouseOut&&$("#dt_grid_"+d+" .dt-grid-cell").mouseout(function(o){t.bindCellEvent(t.option.onCellMouseOut,this,o)}),t.option.onCellMouseDown&&$("#dt_grid_"+d+" .dt-grid-cell").mousedown(function(o){t.bindCellEvent(t.option.onCellMouseDown,this,o)}),t.option.onCellMouseUp&&$("#dt_grid_"+d+" .dt-grid-cell").mouseup(function(o){t.bindCellEvent(t.option.onCellMouseUp,this,o)}),t.option.onRowClick&&$("#dt_grid_"+d+" .dt-grid-cell").click(function(o){t.bindRowEvent(t.option.onRowClick,this,o)}),t.option.onRowDblClick&&$("#dt_grid_"+d+" .dt-grid-cell").dblclick(function(o){t.bindRowEvent(t.option.onRowDblClick,this,o)}),t.option.onRowMouseOver&&$("#dt_grid_"+d+" .dt-grid-cell").mouseover(function(o){t.bindRowEvent(t.option.onRowMouseOver,this,o)}),t.option.onRowMouseMove&&$("#dt_grid_"+d+" .dt-grid-cell").mousemove(function(o){t.bindRowEvent(t.option.onRowMouseMove,this,o)}),t.option.onRowMouseOut&&$("#dt_grid_"+d+" .dt-grid-cell").mouseout(function(o){t.bindRowEvent(t.option.onRowMouseOut,this,o)}),t.option.onRowMouseDown&&$("#dt_grid_"+d+" .dt-grid-cell").mousedown(function(o){t.bindRowEvent(t.option.onRowMouseDown,this,o)}),t.option.onRowMouseUp&&$("#dt_grid_"+d+" .dt-grid-cell").mouseup(function(o){t.bindRowEvent(t.option.onRowMouseUp,this,o)}),t.option.onHeaderClick&&$("#dt_grid_"+d+" .dt-grid-header").click(function(o){t.bindHeaderEvent(t.option.onHeaderClick,this,o)}),t.option.onHeaderMouseOver&&$("#dt_grid_"+d+" .dt-grid-header").mouseover(function(o){t.bindHeaderEvent(t.option.onHeaderMouseOver,this,o)}),t.option.onHeaderMouseMove&&$("#dt_grid_"+d+" .dt-grid-header").mousemove(function(o){t.bindHeaderEvent(t.option.onHeaderMouseMove,this,o)}),t.option.onHeaderMouseOut&&$("#dt_grid_"+d+" .dt-grid-header").mouseout(function(o){t.bindHeaderEvent(t.option.onHeaderMouseOut,this,o)}),t.option.onHeaderMouseDown&&$("#dt_grid_"+d+" .dt-grid-header").mousedown(function(o){t.bindHeaderEvent(t.option.onHeaderMouseDown,this,o)}),t.option.onHeaderMouseUp&&$("#dt_grid_"+d+" .dt-grid-header").mouseup(function(o){t.bindHeaderEvent(t.option.onHeaderMouseUp,this,o)}),t.option.onGridClick&&$("#dt_grid_"+d).click(function(o){t.bindGridEvent(t.option.onGridClick,o)}),t.option.onGridDblClick&&$("#dt_grid_"+d).dblclick(function(o){t.bindGridEvent(t.option.onGridDblClick,o)}),t.option.onGridMouseOver&&$("#dt_grid_"+d).mouseover(function(o){t.bindGridEvent(t.option.onGridMouseOver,o)}),t.option.onGridMouseMove&&$("#dt_grid_"+d).mousemove(function(o){t.bindGridEvent(t.option.onGridMouseMove,o)}),t.option.onGridMouseOut&&$("#dt_grid_"+d).mouseout(function(o){t.bindGridEvent(t.option.onGridMouseOut,o)}),t.option.onGridMouseDown&&$("#dt_grid_"+d).mousedown(function(o){t.bindGridEvent(t.option.onGridMouseDown,o)}),t.option.onGridMouseUp&&$("#dt_grid_"+d).mouseup(function(o){t.bindGridEvent(t.option.onGridMouseUp,o)}),t.option.onGridComplete&&t.bindGridEvent(t.option.onGridComplete),$("#dt_grid_"+d+" .extra-column-event").click(function(o){var e=$(this).attr("dataNo");if($("#dt_grid_"+d+"_extra_columns_"+e).hasClass("hidden")){if($("#dt_grid_"+d+"_extra_columns_"+e).removeClass("hidden"),$(this).html($.fn.DtGrid.lang[t.option.lang].extraColumn.close),t.option.onExtraOpen){var i=$("#dt_grid_"+d+' tr[dataNo="'+e+'"]');t.bindExtraEvent(t.option.onExtraOpen,i,o)}}else if($("#dt_grid_"+d+"_extra_columns_"+e).addClass("hidden"),$(this).html($.fn.DtGrid.lang[t.option.lang].extraColumn.open),t.option.onExtraClose){var i=$("#dt_grid_"+d+' tr[dataNo="'+e+'"]');t.bindExtraEvent(t.option.onExtraClose,i,o)}}),$("#dt_grid_"+d+" .can-sort").click(function(){var o=$(this).attr("columnId");if(null==t.sortParameter&&(t.sortParameter=new Object),t.sortParameter.columnId&&t.sortParameter.columnId==o){var e=t.sortParameter.sortType;0==e?t.sortParameter.sortType=1:1==e?t.sortParameter.sortType=2:2==e&&(t.sortParameter.sortType=0)}else t.sortParameter.columnId=o,t.sortParameter.sortType=1;t.reload()}),t.option.onCheck&&$("input[id*=dt_grid_"+d+"_check_]").click(function(o){t.bindCheckEvent(t.option.onCheck,this,o)}),t.option.check&&$("#dt_grid_"+d+"_check").click(function(o){$("input[id*=dt_grid_"+d+"_check_]").attr("checked",this.checked),t.option.onCheck&&$("input[id*=dt_grid_"+d+"_check_]").each(function(){t.bindCheckEvent(t.option.onCheck,this,o)})})},bindCellEvent:function(t,o,e){var i,n=this,a=n.option.id,r=$(o).attr("dataNo"),d=$(o).attr("columnNo"),l=n.option.columns[d],s=n.exhibitDatas[r];i=l.resolution?l.resolution(s[l.id],s,l,n,r,d):n.formatContent(l,s[l.id]);var p=$(o),c=$("#dt_grid_"+a+' tr[dataNo="'+r+'"]'),u=$("#dt_grid_"+a+' .dt-grid-extra-columns>td[dataNo="'+r+'"]');t(i,s,l,n,r,d,p,c,u,e)},bindRowEvent:function(t,o,e){var i,n=this,a=n.option.id,r=$(o).attr("dataNo"),d=$(o).attr("columnNo"),l=n.option.columns[d],s=n.exhibitDatas[r];i=l.resolution?l.resolution(s[l.id],s,l,n,r,d):n.formatContent(l,s[l.id]);var p=$(o),c=$("#dt_grid_"+a+' tr[dataNo="'+r+'"]'),u=$("#dt_grid_"+a+' .dt-grid-extra-columns>td[dataNo="'+r+'"]');t(i,s,l,n,r,d,p,c,u,e)},bindHeaderEvent:function(t,o,e){var i=this,n=i.option.id,a=$(o).attr("columnNo"),r=i.option.columns[a],d=r.title,l=$(o),s=$("#dt_grid_"+n+" tr.dt-grid-headers");t(d,r,i,a,l,s,e)},bindGridEvent:function(t,o){var e=this;t(e,o)},bindExtraEvent:function(t,o,e){var i=this,n=i.option.id,a=$(o).attr("dataNo"),r=i.exhibitDatas[a],d=$("#dt_grid_"+n+' tr[dataNo="'+a+'"]'),l=$("#dt_grid_"+n+' .dt-grid-extra-columns>td[dataNo="'+a+'"]');t(r,i,a,d,l,e)},bindCheckEvent:function(t,o,e){var i=this,n=i.option.id,a=$(o).attr("dataNo"),r=i.exhibitDatas[a],d=$("#dt_grid_"+n+' tr[dataNo="'+a+'"]'),l=$("#dt_grid_"+n+' .dt-grid-extra-columns>td[dataNo="'+a+'"]');t(o.checked,r,i,a,d,l,e)},constructGridPageBar:function(){var t=this;$("#"+t.option.toolbarContainer+" .dt-grid-pager").html("");var o=t.pager.nowPage,e=t.pager.pageCount,i=document.createElement("span");if(null==t.exhibitDatas||t.exhibitDatas.length<=0)i.className="dt-grid-pager-status text-primary",i.innerHTML=$.fn.DtGrid.lang[t.option.lang].pageInfo.nothing;else{i.className="dt-grid-pager-status text-primary";var n=$.fn.DtGrid.lang[t.option.lang].pageInfo.info;n=$.fn.DtGrid.tools.replaceAll(n,"{startRecord}",t.pager.startRecord),n=$.fn.DtGrid.tools.replaceAll(n,"{nowPage}",t.pager.nowPage),n=$.fn.DtGrid.tools.replaceAll(n,"{recordCount}",t.pager.recordCount),n=$.fn.DtGrid.tools.replaceAll(n,"{pageCount}",t.pager.pageCount);var a="",r=t.pager.pageSize;if("object"==typeof t.option.pageSizeLimit){a+='<select id="dt_grid_change_page_size_'+t.option.id+'" name="dt_grid_change_page_size_'+t.option.id+'" class="form-control change-page-size">';for(var d=!1,l=new Array,s=0;s<t.option.pageSizeLimit.length;s++){var p=t.option.pageSizeLimit[s];l.push(parseFloat(p)),r==p&&(d=!0)}d||l.push(r),l.sort(function(t,o){return t>o});for(var s=0;s<l.length;s++){var p=l[s];a+="	<option "+(r==p?'selected="selected"':"")+' value="'+p+'">'+p+"</option>"}a+="</select>",n=$.fn.DtGrid.tools.replaceAll(n,"{pageSize}",a)}else"number"==typeof t.option.pageSizeLimit?(a+='<input id="dt_grid_change_page_size_'+t.option.id+'" name="dt_grid_change_page_size_'+t.option.id+'" type="text" class="form-control change-page-size" value="'+t.pager.pageSize+'" />',n=$.fn.DtGrid.tools.replaceAll(n,"{pageSize}",a)):n=$.fn.DtGrid.tools.replaceAll(n,"{pageSize}",r);i.innerHTML=n}var c=document.createElement("span");c.id=t.option.id+"_dtGridGopage",c.className="dt-grid-pager-status text-primary";var u='<input  class="width-50 form-control change-page-size goPage"/><button  class="btn btn-success btn-xs m-l-5 sureGopage">GO</button>';c.innerHTML=$.fn.DtGrid.tools.replaceAll(u,"{pageSize}",u);var g=document.createElement("ul");if(g.id=t.option.id+"_dtGridOperations",g.className="pagination pagination-sm dt-grid-pager-button",$("#"+t.option.toolbarContainer+" .dt-grid-pager").append(g),$("#"+t.option.toolbarContainer+" .dt-grid-pager").append(c),$("#"+t.option.toolbarContainer+" .dt-grid-pager").append(i),$("#"+t.option.toolbarContainer+" .sureGopage").click(function(o){o.stopPropagation(),o.preventDefault(),t.goPage($("#"+t.option.toolbarContainer+" .goPage").val())}),$("#dt_grid_change_page_size_"+t.option.id).change(function(){var o=parseFloat(this.value);return isNaN(o)?($.fn.DtGrid.tools.toast($.fn.DtGrid.lang[t.option.lang].pageInfo.errors.notANumber,"warning",3e3),void $("#dt_grid_change_page_size_"+t.option.id).val(t.pager.pageSize)):"number"==typeof t.option.pageSizeLimit&&o>t.option.pageSizeLimit?($.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].pageInfo.errors.maxPageSize,"{pageSizeLimit}",t.option.pageSizeLimit),"warning",3e3),void $("#dt_grid_change_page_size_"+t.option.id).val(t.pager.pageSize)):(t.pager.pageSize=o,void t.goPage("1"))}),null!=t.exhibitDatas&&t.exhibitDatas.length>0){var _=document.createElement("li");_.id="dt_grid_"+t.option.id+"_page_first",_.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.firstPageTitle,1>=o&&(_.className="disabled",_.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyFirstPage),_.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[t.option.lang].pageInfo.firstPage+"</a>",$("#"+t.option.id+"_dtGridOperations").append(_),$("#dt_grid_"+t.option.id+"_page_first").click(function(){t.loadByPage("first")});var f=document.createElement("li");if(f.id="dt_grid_"+t.option.id+"_page_prev",f.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.prevPageTitle,1>=o&&(f.className="disabled",f.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyFirstPage),f.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[t.option.lang].pageInfo.prevPage+"</a>",$("#"+t.option.id+"_dtGridOperations").append(f),$("#dt_grid_"+t.option.id+"_page_prev").click(function(){t.loadByPage("prev")}),5>=e)for(var s=1;e>=s;s++){var v=document.createElement("li");v.id="dt_grid_"+t.option.id+"_page_"+s,v.setAttribute("page",s),v.title=$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].pageInfo.nowPageTitle,"{nowPage}",s),v.className=s==o?"active":"",v.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].pageInfo.nowPage,"{nowPage}",s)+"</a>",$("#"+t.option.id+"_dtGridOperations").append(v),s!=o&&$("#dt_grid_"+t.option.id+"_page_"+s).click(function(){t.goPage($(this).attr("page"))})}else{var h=2,m=2,b=1>o-h?1:o-h,y=o+m>e?e:o+m;h+m+1>y-b+1&&(1==b&&(y+=h+m+1-(y-b+1),y=y>e?e:y),y==e&&(b-=h+m+1-(y-b+1),b=1>b?1:b));for(var s=b;y>=s;s++){var v=document.createElement("li");v.id="dt_grid_"+t.option.id+"_page_"+s,v.setAttribute("page",s),v.title=$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].pageInfo.nowPageTitle,"{nowPage}",s),v.className=s==o?"active":"",v.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].pageInfo.nowPage,"{nowPage}",s)+"</a>",$("#"+t.option.id+"_dtGridOperations").append(v),s!=o&&$("#dt_grid_"+t.option.id+"_page_"+s).click(function(){t.goPage($(this).attr("page"))})}}var D=document.createElement("li");D.className="active",D.innerHTML='<a href="javascript:void(0);">'+t.pager.nowPage+"</a>";var x=document.createElement("li");x.id="dt_grid_"+t.option.id+"_page_next",x.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.nextPageTitle,o>=e&&(x.className="disabled",x.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyLastPage),x.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[t.option.lang].pageInfo.nextPage+"</a>",$("#"+t.option.id+"_dtGridOperations").append(x),$("#dt_grid_"+t.option.id+"_page_next").click(function(){t.loadByPage("next")});var G=document.createElement("li");G.id="dt_grid_"+t.option.id+"_page_last",G.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.lastPageTitle,o>=e&&(G.className="disabled",G.title=$.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyLastPage),G.innerHTML='<a href="javascript:void(0);">'+$.fn.DtGrid.lang[t.option.lang].pageInfo.lastPage+"</a>",$("#"+t.option.id+"_dtGridOperations").append(G),$("#dt_grid_"+t.option.id+"_page_last").click(function(){t.loadByPage("last")})}$("#"+t.option.toolbarContainer+" .dt-grid-pager").append('<div class="clearfix"></div>'),$("#"+t.option.toolbarContainer).append('<div class="clearfix"></div>')},toolbar:function(t){var o=this,e={refresh:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.refreshTitle+'"><a href="javascript:void(0);" id="refreshGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.refresh+"</a></li>",faseQuery:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.faseQueryTitle+'"><a href="javascript:void(0);" id="faseQuery_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.faseQuery+"</a></li>",advanceQuery:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.advanceQueryTitle+'"><a href="javascript:void(0);" id="advanceQuery_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.advanceQuery+"</a></li>",exportExcel:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportExcelTitle+'"><a href="javascript:void(0);" id="exportExcelGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportExcel+"</a></li>",exportCsv:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportCsvTitle+'"><a href="javascript:void(0);" id="exportCsvGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportCsv+"</a></li>",exportPdf:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportPdfTitle+'"><a href="javascript:void(0);" id="exportPdfGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportPdf+"</a></li>",exportTxt:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportTxtTitle+'"><a href="javascript:void(0);" id="exportTxtGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.exportTxt+"</a></li>",print:'<li title="'+$.fn.DtGrid.lang[o.option.lang].toolbar.printTitle+'"><a href="javascript:void(0);" id="printGrid_replaceId">'+$.fn.DtGrid.lang[o.option.lang].toolbar.print+"</a></li>"};return e[t]},constructGridToolBar:function(){var t=this;if($("#"+t.option.toolbarContainer).html('<span class="pagination pagination-sm dt-grid-tools"></span><span class="dt-grid-pager"></span>'),void 0!=t.option.tools&&null!=t.option.tools&&""!=t.option.tools)for(var o=t.option.tools,e=0;e<o.split("|").length;e++){var i=o.split("|")[e];if("refresh"==i){var n=$.fn.DtGrid.tools.replaceAll(t.toolbar("refresh"),"replaceId",t.option.id);$("#"+t.option.toolbarContainer+" .dt-grid-tools").append(n),$("#refreshGrid_"+t.option.id).click(function(){t.reload(!0)})}if("faseQuery"==i){var n=$.fn.DtGrid.tools.replaceAll(t.toolbar("faseQuery"),"replaceId",t.option.id);$("#"+t.option.toolbarContainer+" .dt-grid-tools").append(n),$("#faseQuery_"+t.option.id).click(function(){t.faseQuery()})}if("advanceQuery"==i){var n=$.fn.DtGrid.tools.replaceAll(t.toolbar("advanceQuery"),"replaceId",t.option.id);$("#"+t.option.toolbarContainer+" .dt-grid-tools").append(n),$("#advanceQuery_"+t.option.id).click(function(){t.advanceQuery()})}if(-1!=i.indexOf("export")){i=$.fn.DtGrid.tools.replaceAll(i,"export",""),i=$.fn.DtGrid.tools.replaceAll(i,"\\[",""),i=$.fn.DtGrid.tools.replaceAll(i,"\\]","");for(var n="",a=0;a<i.split(",").length;a++){var r=i.split(",")[a];"excel"==r&&(n+=$.fn.DtGrid.tools.replaceAll(t.toolbar("exportExcel"),"replaceId",t.option.id)),"csv"==r&&(n+=$.fn.DtGrid.tools.replaceAll(t.toolbar("exportCsv"),"replaceId",t.option.id)),"pdf"==r&&(n+=$.fn.DtGrid.tools.replaceAll(t.toolbar("exportPdf"),"replaceId",t.option.id)),"txt"==r&&(n+=$.fn.DtGrid.tools.replaceAll(t.toolbar("exportTxt"),"replaceId",t.option.id))}$("#"+t.option.toolbarContainer+" .dt-grid-tools").append(n);for(var a=0;a<i.split(",").length;a++){var r=i.split(",")[a];"excel"==r&&$("#exportExcelGrid_"+t.option.id).click(function(){t.exportFile("excel")}),"csv"==r&&$("#exportCsvGrid_"+t.option.id).click(function(){t.exportFile("csv")}),"pdf"==r&&$("#exportPdfGrid_"+t.option.id).click(function(){t.exportFile("pdf")}),"txt"==r&&$("#exportTxtGrid_"+t.option.id).click(function(){t.exportFile("txt")})}}if("print"==i){var n=$.fn.DtGrid.tools.replaceAll(t.toolbar("print"),"replaceId",t.option.id);$("#"+t.option.toolbarContainer+" .dt-grid-tools").append(n),$("#printGrid_"+t.option.id).click(function(){t.print()})}}},processBarThread:null,processWidth:null,showProcessBar:function(){var t=this;clearInterval(t.processBarThread),$("#dt_grid_process_bar_top_"+t.option.id).remove(),$("#dt_grid_process_bar_bottom_"+t.option.id).remove(),t.processWidth=0,t.processBarThread=null;var o="";o+='<div class="dt-grid-process-bar-top bg-primary" id="dt_grid_process_bar_top_'+t.option.id+'"></div>',o+='<div class="dt-grid-process-bar-bottom bg-primary" id="dt_grid_process_bar_bottom_'+t.option.id+'"></div>',$("#"+t.option.gridContainer).append(o),t.processWidth+=Math.random()*(100-t.processWidth)*.1,$("#dt_grid_process_bar_top_"+t.option.id).animate({width:t.processWidth+"%"},200),$("#dt_grid_process_bar_bottom_"+t.option.id).animate({width:t.processWidth+"%"},200),t.processBarThread=setInterval(function(){t.processWidth+=Math.random()*(100-t.processWidth)*.1,$("#dt_grid_process_bar_top_"+t.option.id).animate({width:t.processWidth+"%"},200),$("#dt_grid_process_bar_bottom_"+t.option.id).animate({width:t.processWidth+"%"},200)},200)},hideProcessBar:function(t){var o=this;clearInterval(o.processBarThread);var o=this;$("#dt_grid_process_bar_top_"+o.option.id).animate({width:"100%"},100,function(){$("#dt_grid_process_bar_top_"+o.option.id).remove(),t()}),$("#dt_grid_process_bar_bottom_"+o.option.id).animate({width:"100%"},100,function(){$("#dt_grid_process_bar_bottom_"+o.option.id).remove()})},formatContent:function(t,o){try{if(t.codeTable){var e=t.codeTable[o];return e?e:o}if("number"==t.type&&t.format)return $.fn.DtGrid.tools.numberFormat(o,t.format);if("date"==t.type&&t.format){if(!t.otype)return $.fn.DtGrid.tools.dateFormat(o,t.format);if("time_stamp_s"==t.otype)return o=new Date(1e3*parseFloat(o)),$.fn.DtGrid.tools.dateFormat(o,t.format);if("time_stamp_ms"==t.otype)return o=new Date(parseFloat(o)),$.fn.DtGrid.tools.dateFormat(o,t.format);if("string"==t.otype&&t.oformat)return o=$.fn.DtGrid.tools.toDate(o,t.oformat),$.fn.DtGrid.tools.dateFormat(o,t.format)}}catch(i){}return o},getExtraColumnClass:function(){for(var t=this,o="",e=[!0,!0,!0,!0],i=t.option.columns,n=0;n<i.length;n++){var a=i[n];if(1!=a.hide&&void 0!=a.hideType)for(var r=a.hideType.split("|"),d=0;d<r.length;d++){var l=r[d];"lg"==l&&(e[0]="visible-lg"),"md"==l&&(e[1]="visible-md"),"sm"==l&&(e[2]="visible-sm"),"xs"==l&&(e[3]="visible-xs")}}for(var n=0;n<e.length;n++)1!=e[n]&&(o+=e[n]+" ");return""==o&&(o="hidden "),o},getColumnClassForHide:function(t){var o="";if(1==t.hide)return o+="hidden ";if(void 0!=t.hideType)for(var e=t.hideType.split("|"),i=0;i<e.length;i++){var n=e[i];"lg"==n&&(o+="hidden-lg "),"md"==n&&(o+="hidden-md "),"sm"==n&&(o+="hidden-sm "),"xs"==n&&(o+="hidden-xs ")}return o},getExtraColumnClassForHide:function(t){var o="";if(1==t.hide)return o+="hidden ";if(void 0!=t.hideType){for(var e=t.hideType.split("|"),i=0;i<e.length;i++){var n=e[i];"lg"==n&&(o+="visible-lg "),"md"==n&&(o+="visible-md "),"sm"==n&&(o+="visible-sm "),"xs"==n&&(o+="visible-xs ")}""==o&&(o="hidden ")}else o="hidden ";return o},goPage:function(t){var o=this,e=o.pager.pageSize,i=o.pager.pageCount,n=parseFloat(t);isNaN(n)||(n>0&&i>=n&&(o.pager.nowPage=n,o.pager.startRecord=e*(n-1),o.load()),0>=n&&o.loadByPage("first"),n>i&&o.loadByPage("last")),window.document.scrollingElement.scrollTop&&(window.document.scrollingElement.scrollTop=0)},loadByPage:function(t){var o=this;if(t=t?t:"","first"==t){var e=o.pager.nowPage;e>1&&(o.pager.startRecord=0,o.pager.nowPage=1,o.load())}else if("prev"==t){var e=o.pager.nowPage,i=o.pager.pageSize;e>1&&(e--,o.pager.nowPage=e,o.pager.startRecord=i*(e-1),o.load())}else if("next"==t){var e=o.pager.nowPage,i=o.pager.pageSize,n=o.pager.pageCount;n>e&&(e++,o.pager.nowPage=e,o.pager.startRecord=i*(e-1),o.load())}else if("last"==t){var e=o.pager.nowPage,n=o.pager.pageCount;if(n>e){var i=o.pager.pageSize,n=o.pager.pageCount;o.pager.nowPage=0==n?1:n,o.pager.startRecord=i*(n-1),o.pager.startRecord<0&&(o.pager.startRecord=0),o.load()}}else o.load()},faseQuery:function(){var t=this;if(t.init.fastQueryWindowIsInit)return void $("#faseQuery_"+t.option.id+"Modal").modal("show");var o="";o+=$.fn.DtGrid.tools.getWindowStart("faseQuery_"+t.option.id,$.fn.DtGrid.lang[t.option.lang].fastQuery.title),o+='<form id="faseQueryForm_'+t.option.id+'">',o+='	<div class="modal-body form-horizontal">';for(var e=0;e<t.option.columns.length;e++){var i=t.option.columns[e];if(1==i.fastQuery){if(o+='<div class="form-group">',o+='	<label class="col-sm-3 control-label text-right">'+i.title+"ï¼š</label>","range"==i.fastQueryType)o+='<div class="col-sm-4">',"date"==i.type?(o+='<div class="input-group">',o+='	<input type="text" class="form-control" id="ge_'+i.id+'" name="ge_'+i.id+'" format="'+i.format+'" placeholder="'+$.fn.DtGrid.lang[t.option.lang].fastQuery.selectStart+i.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(i.format,"h","H")+"'});\" />",o+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',o+="</div>"):o+='<input type="text" class="form-control" id="ge_'+i.id+'" name="ge_'+i.id+'" placeholder="'+$.fn.DtGrid.lang[t.option.lang].fastQuery.inputStart+i.title+'" />',o+="</div>",o+='<div class="col-sm-4">',"date"==i.type?(o+='<div class="input-group">',o+='	<input type="text" class="form-control" id="le_'+i.id+'" name="le_'+i.id+'" format="'+i.format+'" placeholder="'+$.fn.DtGrid.lang[t.option.lang].fastQuery.selectEnd+i.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(i.format,"h","H")+"'});\" />",o+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',o+="</div>"):o+='<input type="text" class="form-control" id="le_'+i.id+'" name="le_'+i.id+'" placeholder="'+$.fn.DtGrid.lang[t.option.lang].fastQuery.inputEnd+i.title+'" />',o+="</div>";else if(i.codeTable){o+='<div class="col-sm-4">',o+='	<select class="form-control" id="'+i.fastQueryType+"_"+i.id+'" name="'+i.fastQueryType+"_"+i.id+'">',o+='		<option value="">'+$.fn.DtGrid.lang[t.option.lang].fastQuery.codeTableSelectAll+"</option>";for(var n in i.codeTable)o+='	<option value="'+n+'">'+i.codeTable[n]+"</option>";o+="	</select>",o+="</div>"}else{if(o+='<div class="col-sm-4">',"date"==i.type){o+='<div class="input-group">';var a=$.fn.DtGrid.lang[t.option.lang].fastQuery.selectStart;("lt"==i.fastQueryType||"le"==i.fastQueryType)&&(a=$.fn.DtGrid.lang[t.option.lang].fastQuery.selectEnd),o+='	<input type="text" class="form-control" id="'+i.fastQueryType+"_"+i.id+'" name="'+i.fastQueryType+"_"+i.id+'" format="'+i.format+'" placeholder="'+a+i.title+'" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(i.format,"h","H")+"'});\" />",o+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',o+="</div>"}else o+='<input type="text" class="form-control" id="'+i.fastQueryType+"_"+i.id+'" name="'+i.fastQueryType+"_"+i.id+'" placeholder="'+$.fn.DtGrid.lang[t.option.lang].fastQuery.input+i.title+'" />';o+="</div>"}o+="</div>"}}o+="	</div>",o+="</form>";var r="";r+='<button type="button" class="btn btn-warning" id="resetFaseQuery_'+t.option.id+'">'+$.fn.DtGrid.lang[t.option.lang].fastQuery.buttons.reset+"</button>",r+='<button type="button" class="btn btn-primary" id="doFaseQuery_'+t.option.id+'">'+$.fn.DtGrid.lang[t.option.lang].fastQuery.buttons.query+"</button>",o+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[t.option.lang].buttons.close,r),$("body").append(o),$("#resetFaseQuery_"+t.option.id).click(function(){document.forms["faseQueryForm_"+t.option.id].reset()
}),$("#doFaseQuery_"+t.option.id).click(function(){t.doFaseQuery(document.forms["faseQueryForm_"+t.option.id]),$("#faseQuery_"+t.option.id+"Modal").modal("hide")}),$("#faseQuery_"+t.option.id+"Modal").modal("show"),t.init.fastQueryWindowIsInit=!0},doFaseQuery:function(t){var o=this;o.fastQueryParameters=new Object;for(var e=t.elements,i=0;i<e.length;i++){var n=e[i];$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"text")||$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"hidden")||$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"textarea")||$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"select-one")||$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"password")?""!=n.name&&(o.fastQueryParameters[n.name]=n.value,o.fastQueryParameters[n.name+"_format"]=n.getAttribute("format")):($.fn.DtGrid.tools.equalsIgnoreCase(n.type,"checkbox")||$.fn.DtGrid.tools.equalsIgnoreCase(n.type,"radio"))&&n.checked&&""!=n.name&&(o.fastQueryParameters[n.name]=n.value,o.fastQueryParameters[n.name+"_format"]=n.getAttribute("format"))}o.load()},doFaseQueryDatasFilter:function(t,o){for(var e=new Array,i=0;i<t.length;i++){var n=t[i],a=!0;for(var r in o)if(o[r]&&null!=o[r]&&""!=o[r]){if($.fn.DtGrid.tools.startsWith(r,"eq_")){var d=n[r.replace("eq_","")];if(d=d?d:"",d!=o[r]){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"ne_")){var d=n[r.replace("ne_","")];if(d=d?d:"",d==o[r]){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"lk_")){var d=n[r.replace("lk_","")];if(d=d?d:"",-1==d.indexOf(o[r])){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"ll_")){var d=n[r.replace("ll_","")];if(d=d?d:"",!$.fn.DtGrid.tools.startsWith(d,o[r])){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"rl_")){var d=n[r.replace("rl_","")];if(d=d?d:"",!$.fn.DtGrid.tools.endsWith(d,o[r])){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"gt_")){var d=n[r.replace("gt_","")];if(d=d?d:"",d instanceof Date&&d.getTime()-$.fn.DtGrid.tools.toDate(o[r],o[r+"_format"]).getTime()<=0){a=!1;continue}if(!(d instanceof Date||isNaN(d))&&parseFloat(d)-parseFloat(o[r])<=0){a=!1;continue}if(!(d instanceof Date)&&isNaN(d)&&d.localeCompare(o[r])<=0){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"ge_")){var d=n[r.replace("ge_","")];if(d=d?d:"",d instanceof Date&&d.getTime()-$.fn.DtGrid.tools.toDate(o[r],o[r+"_format"]).getTime()<0){a=!1;continue}if(!(d instanceof Date||isNaN(d))&&parseFloat(d)-parseFloat(o[r])<0){a=!1;continue}if(!(d instanceof Date)&&isNaN(d)&&d.localeCompare(o[r])<0){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"lt_")){var d=n[r.replace("lt_","")];if(d=d?d:"",d instanceof Date&&d.getTime()-$.fn.DtGrid.tools.toDate(o[r],o[r+"_format"]).getTime()>=0){a=!1;continue}if(!(d instanceof Date||isNaN(d))&&parseFloat(d)-parseFloat(o[r])>=0){a=!1;continue}if(!(d instanceof Date)&&isNaN(d)&&d.localeCompare(o[r])>=0){a=!1;continue}}if($.fn.DtGrid.tools.startsWith(r,"le_")){var d=n[r.replace("le_","")];if(d=d?d:"",d instanceof Date&&d.getTime()-$.fn.DtGrid.tools.toDate(o[r],o[r+"_format"]).getTime()>0){a=!1;continue}if(!(d instanceof Date||isNaN(d))&&parseFloat(d)-parseFloat(o[r])>0){a=!1;continue}if(!(d instanceof Date)&&isNaN(d)&&d.localeCompare(o[r])>0){a=!1;continue}}}a&&e.push(n)}return e},advanceQuery:function(){var t=this;if(t.init.advanceQueryWindowIsInit)return void $("#advanceQuery_"+t.option.id+"Modal").modal("show");var o="";o+=$.fn.DtGrid.tools.getWindowStart("advanceQuery_"+t.option.id,$.fn.DtGrid.lang[t.option.lang].advanceQuery.title),o+='<div class="modal-body advance-query">',o+='	<ul class="nav nav-tabs" role="tablist">',o+='		<li class="active"><a href="#advance_query_condition_'+t.option.id+'" role="tab" data-toggle="tab">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.title+"</a></li>",o+='		<li><a href="#advance_query_sort_'+t.option.id+'" role="tab" data-toggle="tab">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.title+"</a></li>",o+="	</ul>",o+='	<div class="tab-content">',o+='		<div class="tab-pane active" id="advance_query_condition_'+t.option.id+'">',o+='			<div class="panel panel-default">',o+='				<div class="form-horizontal text-right advance-query-buttons">',o+='					<button id="insertConditionTr_'+t.option.id+'" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.buttons.insertTitle+'" class="btn btn-xs btn-primary">',o+="						"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.buttons.insert,o+="					</button>",o+='					<button id="clearConditionTr_'+t.option.id+'" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.buttons.clearTitle+'" class="btn btn-xs btn-danger">',o+="						"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.buttons.clear,o+="					</button>",o+="				</div>",o+='				<div class="advance-query-table-container">',o+='					<table id="conditionTable_'+t.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center" style="width:860px;">',o+="						<tr>",o+='							<th style="width:50px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.sequence+"</th>",o+='							<th style="width:100px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.operation+"</th>",o+='							<th style="width:80px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.leftParentheses+"</th>",o+='							<th style="width:140px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.field+"</th>",o+='							<th style="width:120px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.condition+"</th>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.value+"</th>",o+='							<th style="width:80px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.rightParentheses+"</th>",o+='							<th style="width:90px;">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.logic+"</th>",o+="						</tr>",o+="					</table>",o+="				</div>",o+='				<div class="clearfix"></div>',o+="			</div>",o+="		</div>",o+='		<div class="tab-pane" id="advance_query_sort_'+t.option.id+'">',o+='			<div class="panel panel-default">',o+='				<div class="form-horizontal text-right advance-query-buttons">',o+='					<button id="insertSortTr_'+t.option.id+'" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.buttons.insertTitle+'" class="btn btn-xs btn-primary">',o+="						"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.buttons.insert,o+="					</button>",o+='					<button id="clearSortTr_'+t.option.id+'" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.buttons.clearTitle+'" class="btn btn-xs btn-danger">',o+="						"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.buttons.clear,o+="					</button>",o+="				</div>",o+='				<div class="advance-query-table-container">',o+='					<table id="sortTable_'+t.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center">',o+="						<tr>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.sequence+"</th>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.operation+"</th>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.field+"</th>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.logic+"</th>",o+="						</tr>",o+="					</table>",o+="				</div>",o+='				<div class="clearfix"></div>',o+="			</div>",o+="		</div>",o+="	</div>",o+="</div>";var e="";e+='<button type="button" class="btn btn-primary" id="doAdvanceQuery_'+t.option.id+'">',e+="	"+$.fn.DtGrid.lang[t.option.lang].advanceQuery.buttons.query,e+="</button>",o+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[t.option.lang].buttons.close,e),$("body").append(o),$("#insertConditionTr_"+t.option.id).click(function(){t.insertConditionTr()}),$("#clearConditionTr_"+t.option.id).click(function(){t.clearConditionTr()}),$("#insertSortTr_"+t.option.id).click(function(){t.insertSortTr()}),$("#clearSortTr_"+t.option.id).click(function(){t.clearSortTr()}),$("#doAdvanceQuery_"+t.option.id).click(function(){t.doAdvanceQuery()}),$("#advanceQuery_"+t.option.id+"Modal").modal("show"),t.init.advanceQueryWindowIsInit=!0},doAdvanceQuery:function(){var t=this,o=!0,e=new Array;$("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var i=this.id.split("_")[2],n=$("#conditionTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+i).html(),a=$("#conditionTable_"+t.option.id+" #leftParentheses_"+t.option.id+"_"+i).val(),r=$("#conditionTable_"+t.option.id+" #field_"+t.option.id+"_"+i).val(),d=$("#conditionTable_"+t.option.id+" #format_"+t.option.id+"_"+i).val(),l=$("#conditionTable_"+t.option.id+" #condition_"+t.option.id+"_"+i).val(),s=$("#conditionTable_"+t.option.id+" #value_"+t.option.id+"_"+i).val(),p=$("#conditionTable_"+t.option.id+" #rightParentheses_"+t.option.id+"_"+i).val(),c=$("#conditionTable_"+t.option.id+" #logic_"+t.option.id+"_"+i).val();if(""==r)return $.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.errors.fieldMustSelect,"{sequence}",n),"warning",3e3),o=!1,!1;if(""==l)return $.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.errors.conditionMustSelect,"{sequence}",n),"warning",3e3),o=!1,!1;var u=new Object;u.id=i,u.seq=n,u.leftParentheses=a,u.field=r,u.format=d,u.condition=l,u.value=s,u.rightParentheses=p,u.logic=c,e.push(u)});var i=new Array;$("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var e=this.id.split("_")[2],n=$("#sortTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+e).html(),a=$("#sortTable_"+t.option.id+" #sortField_"+t.option.id+"_"+e).val(),r=$("#sortTable_"+t.option.id+" #sortLogic_"+t.option.id+"_"+e).val();if(""==a)return $.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.errors.fieldMustSelect,"{sequence}",n),"warning",3e3),o=!1,!1;if(""==r)return $.fn.DtGrid.tools.toast($.fn.DtGrid.tools.replaceAll($.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.errors.logicMustSelect,"{sequence}",n),"warning",3e3),o=!1,!1;var d=new Object;d.field=a,d.logic=r,i.push(d)}),o&&(t.advanceQueryParameter=new Object,t.advanceQueryParameter.advanceQueryConditions=e,t.advanceQueryParameter.advanceQuerySorts=i,t.load(),$("#advanceQuery_"+t.option.id+"Modal").modal("hide"))},doAdvanceQueryDatasFilter:function(originalDatas,advanceQueryParameter){for(var returnDatas=new Array,i=0;i<originalDatas.length;i++){var record=originalDatas[i];if(advanceQueryParameter.advanceQueryConditions&&advanceQueryParameter.advanceQueryConditions.length>0){for(var condition="",j=0;j<advanceQueryParameter.advanceQueryConditions.length;j++){var advanceQueryCondition=advanceQueryParameter.advanceQueryConditions[j];if(condition+=advanceQueryCondition.leftParentheses,"0"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]=="'+advanceQueryCondition.value+'"'),"1"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]!="'+advanceQueryCondition.value+'"'),"2"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"].indexOf("'+advanceQueryCondition.value+'")!=-1'),"3"==advanceQueryCondition.condition&&(condition+='$.fn.DtGrid.tools.startsWith(record["'+advanceQueryCondition.field+'"], "'+advanceQueryCondition.value+'")'),"4"==advanceQueryCondition.condition&&(condition+='$.fn.DtGrid.tools.endsWith(record["'+advanceQueryCondition.field+'"], "'+advanceQueryCondition.value+'")'),"5"==advanceQueryCondition.condition){var value=record[advanceQueryCondition.field];value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())>0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))>0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")>0')}if("6"==advanceQueryCondition.condition){var value=record[advanceQueryCondition.field];value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())>=0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))>=0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")>=0')}if("7"==advanceQueryCondition.condition){var value=record[advanceQueryCondition.field];value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())<0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))<0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")<0')}if("8"==advanceQueryCondition.condition){var value=record[advanceQueryCondition.field];value instanceof Date&&(condition+='(record["'+advanceQueryCondition.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+advanceQueryCondition.value+'", "'+advanceQueryCondition.format+'").getTime())<=0'),value instanceof Date||isNaN(value)||(condition+='(parseFloat(record["'+advanceQueryCondition.field+'"]) - parseFloat("'+advanceQueryCondition.value+'"))<=0'),value instanceof Date||!isNaN(value)||(condition+='record["'+advanceQueryCondition.field+'"].localeCompare("'+advanceQueryCondition.value+'")<=0')}"9"==advanceQueryCondition.condition&&(condition+='!record["'+advanceQueryCondition.field+'"]'),"10"==advanceQueryCondition.condition&&(condition+='record["'+advanceQueryCondition.field+'"]'),condition+=advanceQueryCondition.rightParentheses,"0"==advanceQueryCondition.logic&&(condition+="&&"),"1"==advanceQueryCondition.logic&&(condition+="||")}try{eval(condition)&&returnDatas.push(record)}catch(e){return $.fn.DtGrid.tools.toast($.fn.DtGrid.lang[dtGridReflectionObj.option.lang].advanceQuery.condition.errors.conditionError,"error",3e3),originalDatas}}else returnDatas.push(record)}return advanceQueryParameter.advanceQuerySorts&&advanceQueryParameter.advanceQuerySorts.length>0&&(returnDatas=returnDatas.sort(function(t,o){for(var e=0;e<advanceQueryParameter.advanceQuerySorts.length;e++){var i=advanceQueryParameter.advanceQuerySorts[e],n=t[i.field],a=o[i.field];if(n&&a){if(n==a)continue;if(!isNaN(n)&&!isNaN(a)){if("0"==i.logic)return n-a;if("1"==i.logic)return a-n}if(n instanceof Date&&a instanceof Date){if("0"==i.logic)return n.getTime()-a.getTime();if("1"==i.logic)return a.getTime()-n.getTime()}if("0"==i.logic)return n.localeCompare(a);if("1"==i.logic)return a.localeCompare(n)}}return 0})),returnDatas},sequenceCondition:0,insertConditionTr:function(){var t=this,o="";o+='<tr id="tr_'+t.option.id+"_"+t.sequenceCondition+'">',o+='	<td id="seqTd_'+t.option.id+"_"+t.sequenceCondition+'"></td>',o+="	<td>",o+='		<button type="button" id="moveUpConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.up+"</button>",o+='		<button type="button" id="moveDownConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.down+"</button>",o+='		<button type="button" id="deleteConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-danger btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.deleteTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons["delete"]+"</button>",o+="	</td>",o+="	<td>",o+='		<input type="text" id="leftParentheses_'+t.option.id+"_"+t.sequenceCondition+'" name="leftParentheses_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control" />',o+="	</td>",o+="	<td>",o+='		<select id="field_'+t.option.id+"_"+t.sequenceCondition+'" name="field_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">',o+='			<option value=""></option>';for(var e=0;e<t.option.columns.length;e++){var i=t.option.columns[e];0!=i.advanceQuery&&(o+='	<option value="'+i.id+'">'+i.title+"</option>")}o+="		</select>",o+='		<input type="hidden" id="format_'+t.option.id+"_"+t.sequenceCondition+'" name="format_'+t.option.id+"_"+t.sequenceCondition+'" />',o+="	</td>",o+="	<td>",o+='		<select id="condition_'+t.option.id+"_"+t.sequenceCondition+'" name="condition_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">',o+='			<option value=""></option>',o+='			<option value="0">=</option>',o+='			<option value="1">!=</option>',o+='			<option value="2">like</option>',o+='			<option value="3">start with</option>',o+='			<option value="4">end with</option>',o+='			<option value="5">&gt;</option>',o+='			<option value="6">&gt;=</option>',o+='			<option value="7">&lt;</option>',o+='			<option value="8">&lt;=</option>',o+='			<option value="9">is null</option>',o+='			<option value="10">is not null</option>',o+="		</select>",o+="	</td>",o+='	<td id="valueTd_'+t.option.id+"_"+t.sequenceCondition+'"></td>',o+="	<td>",o+='		<input type="text" id="rightParentheses_'+t.option.id+"_"+t.sequenceCondition+'" name="rightParentheses_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control" />',o+="	</td>",o+="	<td>",o+='		<select id="logic_'+t.option.id+"_"+t.sequenceCondition+'" name="logic_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">',o+='			<option value=""></option>',o+='			<option value="0">and</option>',o+='			<option value="1">or</option>',o+="		</select>",o+="	</td>",o+="</tr>",$("#conditionTable_"+t.option.id).append(o),$("#moveUpConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var o=this.id.split("_")[2];t.moveUpConditionTr(o)}),$("#moveDownConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var o=this.id.split("_")[2];t.moveDownConditionTr(o)}),$("#deleteConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var o=this.id.split("_")[2];t.deleteConditionTr(o)}),$("#leftParentheses_"+t.option.id+"_"+t.sequenceCondition).keyup(function(){var o=this.id.split("_")[2];t.validLeftParentheses(o)}),$("#field_"+t.option.id+"_"+t.sequenceCondition).change(function(){var o=this.id.split("_")[2];t.fieldChange(o)}),$("#condition_"+t.option.id+"_"+t.sequenceCondition).change(function(){var o=this.id.split("_")[2];t.conditionChange(o)}),$("#rightParentheses_"+t.option.id+"_"+t.sequenceCondition).keyup(function(){var o=this.id.split("_")[2];t.validRightParentheses(o)}),t.sequenceCondition++,t.resetConditionSeq()},clearConditionTr:function(){var t=this;$("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").remove()},resetConditionSeq:function(){var t=this,o=1;$("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var e=this.id.split("_")[2];$("#conditionTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+e).html(o),o++})},moveUpConditionTr:function(t){var o=this;$("#conditionTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).prev("#conditionTable_"+o.option.id+" tr[id*=tr_"+o.option.id+"_]").before($("#conditionTable_"+o.option.id+" #tr_"+o.option.id+"_"+t)),o.resetConditionSeq()},moveDownConditionTr:function(t){var o=this;$("#conditionTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).next("#conditionTable_"+o.option.id+" tr[id*=tr_"+o.option.id+"_]").after($("#conditionTable_"+o.option.id+" #tr_"+o.option.id+"_"+t)),o.resetConditionSeq()},deleteConditionTr:function(t){var o=this;$("#conditionTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).remove(),o.resetConditionSeq()},validLeftParentheses:function(t){var o=this,e=$("#leftParentheses_"+o.option.id+"_"+t).val();e.match(/^[\(]*$/g)||(e=$.fn.DtGrid.tools.replaceAll(e,"ï¼ˆ","("),e=e.replace(/[^\(]/g,""),$("#leftParentheses_"+o.option.id+"_"+t).val(e))},fieldChange:function(t){var o=this,e=$("#field_"+o.option.id+"_"+t).val(),i=$("#condition_"+o.option.id+"_"+t).val();if(""==e||"9"==i||"10"==i)return void $("#valueTd_"+o.option.id+"_"+t).html("");for(var n=new Object,a=0;a<o.option.columns.length;a++)if(o.option.columns[a].id==e&&0!=o.option.columns[a].advanceQuery){n=o.option.columns[a];break}if("date"==n.type){var r="";return r+='<div class="input-group">',r+='	<input id="value_'+o.option.id+"_"+t+'" name="value_'+o.option.id+"_"+t+'" class="form-control" onclick="WdatePicker({dateFmt:\''+$.fn.DtGrid.tools.replaceAll(n.format,"h","H")+"'})\" />",r+='	<div class="input-group-addon"><i class="fa fa-calendar"></i></div>',r+="</div>",$("#valueTd_"+o.option.id+"_"+t).html(r),void $("#format_"+o.option.id+"_"+t).val(n.format)}if(n.codeTable){var r="";r+='<select id="value_'+o.option.id+"_"+t+'" name="value_'+o.option.id+"_"+t+'" class="form-control">',r+='	<option value=""></option>';for(var d in n.codeTable)r+='<option value="'+d+'">'+n.codeTable[d]+"</option>";return r+="</select>",void $("#valueTd_"+o.option.id+"_"+t).html(r)}var r='<input id="value_'+o.option.id+"_"+t+'" name="value_'+o.option.id+"_"+t+'" class="form-control" />';$("#valueTd_"+o.option.id+"_"+t).html(r)},conditionChange:function(t){var o=this,e=$("#condition_"+o.option.id+"_"+t).val();if("9"==e||"10"==e)$("#valueTd_"+o.option.id+"_"+t).html("");else{var i=$("#valueTd_"+o.option.id+"_"+t).html();""==i&&o.fieldChange(t)}},validRightParentheses:function(t){var o=this,e=$("#rightParentheses_"+o.option.id+"_"+t).val();e.match(/^[\(]*$/g)||(e=$.fn.DtGrid.tools.replaceAll(e,"ï¼‰",")"),e=e.replace(/[^\)]/g,""),$("#rightParentheses_"+o.option.id+"_"+t).val(e))},sequenceSort:0,insertSortTr:function(){var t=this,o="";o+='<tr id="tr_'+t.option.id+"_"+t.sequenceSort+'">',o+='	<td id="seqTd_'+t.option.id+"_"+t.sequenceSort+'"></td>',o+="	<td>",o+='		<button type="button" id="moveUpSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.up+"</button>",o+='		<button type="button" id="moveDownSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-primary btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.down+"</button>",o+='		<button type="button" id="deleteSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-danger btn-xs" title="'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.deleteTitle+'">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons["delete"]+"</button>",o+="	</td>",o+="	<td>",o+='		<select id="sortField_'+t.option.id+"_"+t.sequenceSort+'" name="sortField_'+t.option.id+"_"+t.sequenceSort+'" class="form-control">',o+='			<option value=""></option>';for(var e=0;e<t.option.columns.length;e++){var i=t.option.columns[e];0!=i.advanceQuery&&(o+='	<option value="'+i.id+'">'+i.title+"</option>")}o+="		</select>",o+="	</td>",o+="	<td>",o+='		<select id="sortLogic_'+t.option.id+"_"+t.sequenceSort+'" name="sortLogic_'+t.option.id+"_"+t.sequenceSort+'" class="form-control">',o+='			<option value=""></option>',o+='			<option value="0">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.logic.asc+"</option>",o+='			<option value="1">'+$.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.logic.desc+"</option>",o+="		</select>",o+="	</td>",o+="</tr>",$("#sortTable_"+t.option.id).append(o),$("#moveUpSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var o=this.id.split("_")[2];t.moveUpSortTr(o)}),$("#moveDownSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var o=this.id.split("_")[2];t.moveDownSortTr(o)}),$("#deleteSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var o=this.id.split("_")[2];t.deleteSortTr(o)}),t.sequenceSort++,t.resetSortSeq()},clearSortTr:function(){var t=this;$("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").remove()},resetSortSeq:function(){var t=this,o=1;$("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var e=this.id.split("_")[2];$("#sortTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+e).html(o),o++})},moveUpSortTr:function(t){var o=this;$("#sortTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).prev("#sortTable_"+o.option.id+" tr[id*=tr_"+o.option.id+"_]").before($("#sortTable_"+o.option.id+" #tr_"+o.option.id+"_"+t)),o.resetSortSeq()},moveDownSortTr:function(t){var o=this;$("#sortTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).next("#sortTable_"+o.option.id+" tr[id*=tr_"+o.option.id+"_]").after($("#sortTable_"+o.option.id+" #tr_"+o.option.id+"_"+t)),o.resetSortSeq()},deleteSortTr:function(t){var o=this;$("#sortTable_"+o.option.id+" #tr_"+o.option.id+"_"+t).remove(),o.resetSortSeq()},print:function(){var t=this;if(t.init.printWindowIsInit)return void $("#dtGridPrint_"+t.option.id+"Modal").modal("show");var o="";o+=$.fn.DtGrid.tools.getWindowStart("dtGridPrint_"+t.option.id,$.fn.DtGrid.lang[t.option.lang].print.title),o+='				<table class="table table-bordered table-print">',o+="					<thead>",o+="						<tr>",o+='							<th><input type="checkbox" id="dt_grid_print_check_'+t.option.id+'" checked="checked" /></th>',o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].print.table.column+"</th>",o+="							<th>"+$.fn.DtGrid.lang[t.option.lang].print.table.operation+"</th>",o+="						</tr>",o+="					</thead>",o+="					<tbody>";for(var e=0;e<t.option.columns.length;e++){var i=t.option.columns[e];0!=i.print&&(o+='					<tr id="dt_grid_print_tr_'+t.option.id+"_"+e+'">',o+='						<td><input type="checkbox" id="dt_grid_print_check_'+t.option.id+"_"+e+'" checked="checked" value="'+e+'" /></td>',o+="						<td>"+i.title+"</td>",o+="						<td>",o+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+e+'" id="dt_grid_print_up_'+t.option.id+"_"+e+'" title="'+$.fn.DtGrid.lang[t.option.lang].print.table.buttons.upTitle+'">'+$.fn.DtGrid.lang[t.option.lang].print.table.buttons.up+"</button>",o+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+e+'" id="dt_grid_print_down_'+t.option.id+"_"+e+'" title="'+$.fn.DtGrid.lang[t.option.lang].print.table.buttons.downTitle+'">'+$.fn.DtGrid.lang[t.option.lang].print.table.buttons.down+"</button>",o+="						</td>",o+="					</tr>")}o+="					</tbody>",o+="				</table>";var n="";n+='<button type="button" class="btn btn-primary" id="dt_grid_print_execute_'+t.option.id+'">',n+="	"+$.fn.DtGrid.lang[t.option.lang].print.buttons.print,n+="</button>",o+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[t.option.lang].buttons.close,n),$("body").append(o),$("#dt_grid_print_check_"+t.option.id).click(function(){$("input[id*=dt_grid_print_check_"+t.option.id+"_]").attr("checked",this.checked)}),$("button[id*=dt_grid_print_up_"+t.option.id+"_]").click(function(){var o=$(this).attr("dataId"),e=t.option.id;$("#dt_grid_print_tr_"+e+"_"+o).prev("#dtGridPrint_"+e+"Modal tr[id*=dt_grid_print_tr_"+e+"]").before($("#dt_grid_print_tr_"+e+"_"+o))}),$("button[id*=dt_grid_print_down_"+t.option.id+"_]").click(function(){var o=$(this).attr("dataId"),e=t.option.id;$("#dt_grid_print_tr_"+e+"_"+o).next("#dtGridPrint_"+e+"Modal tr[id*=dt_grid_print_tr_"+e+"]").after($("#dt_grid_print_tr_"+e+"_"+o))}),$("#dt_grid_print_execute_"+t.option.id).click(function(){var o="";if(o+='<table class="dt-grid '+t.option.tableClass+'" id="dt_grid_print_'+t.option.id+'" style="'+t.option.tableStyle+'">',0!=t.option.showHeader&&(o+="<thead>",o+="	<tr>",$("input[id*=dt_grid_print_check_"+t.option.id+"_]:checked").each(function(){var e=this.value;o+='<th class="'+t.option.columns[e].headerClass+'" style="'+t.option.columns[e].headerStyle+'">'+t.option.columns[e].title+"</th>"}),o+="	</tr>",o+="</thead>"),o+="	<tbody>",null!=t.exhibitDatas)for(var e=0;e<t.exhibitDatas.length;e++)o+="	<tr>",$("input[id*=dt_grid_print_check_"+t.option.id+"_]:checked").each(function(){var i=this.value;o+='	<td class="'+t.option.columns[i].columnClass+'" style="'+t.option.columns[i].columnStyle+'">',o+=t.option.columns[i].resolution?t.option.columns[i].resolution(t.exhibitDatas[e][t.option.columns[i].id],t.exhibitDatas[e],t.option.columns[i],t,e,i):t.formatContent(t.option.columns[i],t.exhibitDatas[e][t.option.columns[i].id]),o+="	</td>"}),o+="	</tr>";o+="	</tbody>",o+="</table>";var i=$("body").scrollTop();$("body").hide(),$("html").append(o),window.print(),$("#dt_grid_print_"+t.option.id).remove(),$("body").show(),$("#dtGridPrint_"+t.option.id+"Modal").modal("hide"),$("body").scrollTop(i)}),$("#dtGridPrint_"+t.option.id+"Modal").modal("show"),t.init.printWindowIsInit=!0},exportFile:function(t){var o=this;if(o.init.exportWindowIsInit[t])return void $("#dtGridExport_"+t+"_"+o.option.id+"Modal").modal("show");var e="";e+=$.fn.DtGrid.tools.getWindowStart("dtGridExport_"+t+"_"+o.option.id,$.fn.DtGrid.lang[o.option.lang]["export"][t].title),e+='				<div class="form-export modal-body form-horizontal form-export">',e+='					<div class="form-group">',e+='						<label class="col-sm-3 control-label">'+$.fn.DtGrid.lang[o.option.lang]["export"][t].exportType.title+"</label>",e+='						<div class="col-sm-9">',e+='							<div class="checkbox">',e+='								<label><input type="radio" name="dt_grid_export_export_all_data_'+t+"_"+o.option.id+'" value="0" checked="checked" /> '+$.fn.DtGrid.lang[o.option.lang]["export"][t].exportType.now+"</label>",e+='								<label><input type="radio" name="dt_grid_export_export_all_data_'+t+"_"+o.option.id+'" value="1" /> '+$.fn.DtGrid.lang[o.option.lang]["export"][t].exportType.all+"</label>",e+="							</div>",e+="						</div>",e+="					</div>",e+="				</div>",e+='				<table class="table table-bordered table-export">',e+="					<thead>",e+="						<tr>",e+='							<th><input type="checkbox" id="dt_grid_export_check_'+t+"_"+o.option.id+'" checked="checked" /></th>',e+="							<th>"+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.column+"</th>",e+="							<th>"+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.operation+"</th>",e+="						</tr>",e+="					</thead>",e+="					<tbody>";for(var i=0;i<o.option.columns.length;i++){var n=o.option.columns[i];0!=n["export"]&&(e+='					<tr id="dt_grid_export_tr_'+t+"_"+o.option.id+"_"+i+'">',e+='						<td><input type="checkbox" id="dt_grid_export_check_'+t+"_"+o.option.id+"_"+i+'" checked="checked" value="'+i+'" /></td>',e+="						<td>"+n.title+"</td>",e+="						<td>",e+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+i+'" id="dt_grid_export_up_'+t+"_"+o.option.id+"_"+i+'" title="'+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.buttons.upTitle+'">'+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.buttons.up+"</button>",e+='							<button type="button" class="btn btn-primary btn-xs" dataId="'+i+'" id="dt_grid_export_down_'+t+"_"+o.option.id+"_"+i+'" title="'+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.buttons.downTitle+'">'+$.fn.DtGrid.lang[o.option.lang]["export"][t].table.buttons.down+"</button>",e+="						</td>",e+="					</tr>")}e+="					</tbody>",e+="				</table>";var a="";a+='<button type="button" class="btn btn-primary" id="dt_grid_export_execute_'+t+"_"+o.option.id+'">',a+="	"+$.fn.DtGrid.lang[o.option.lang]["export"][t].buttons["export"],a+="</button>",e+=$.fn.DtGrid.tools.getWindowEnd($.fn.DtGrid.lang[o.option.lang].buttons.close,a),$("body").append(e),$("#dt_grid_export_check_"+t+"_"+o.option.id).click(function(){$("input[id*=dt_grid_export_check_"+t+"_"+o.option.id+"_]").attr("checked",this.checked)}),$("button[id*=dt_grid_export_up_"+t+"_"+o.option.id+"_]").click(function(){var e=$(this).attr("dataId"),i=o.option.id;
    $("#dt_grid_export_tr_"+t+"_"+i+"_"+e).prev("#dtGridExport_"+t+"_"+i+"Modal tr[id*=dt_grid_export_tr_"+t+"_"+i+"]").before($("#dt_grid_export_tr_"+t+"_"+i+"_"+e))}),$("button[id*=dt_grid_export_down_"+t+"_"+o.option.id+"_]").click(function(){var e=$(this).attr("dataId"),i=o.option.id;$("#dt_grid_export_tr_"+t+"_"+i+"_"+e).next("#dtGridExport_"+t+"_"+i+"Modal tr[id*=dt_grid_export_tr_"+t+"_"+i+"]").after($("#dt_grid_export_tr_"+t+"_"+i+"_"+e))}),$("#dt_grid_export_execute_"+t+"_"+o.option.id).click(function(){$("#dt_grid_export_form_container_"+t+"_"+o.option.id).remove();var e=document.createElement("div");e.id="dt_grid_export_form_container_"+t+"_"+o.option.id,e.className="hidden";var i=document.createElement("iframe");i.name="dt_grid_export_iframe_"+t+"_"+o.option.id,e.appendChild(i);var n=document.createElement("form");n.id="dt_grid_export_form_"+t+"_"+o.option.id,n.method="post",n.target="dt_grid_export_iframe_"+t+"_"+o.option.id,n.action=0==o.option.ajaxLoad||1==o.option.loadAll?o.option.exportURL:o.option.loadURL;var a=new Object;a.pageSize=o.pager.pageSize,a.startRecord=o.pager.startRecord,a.nowPage=o.pager.nowPage,a.recordCount=o.pager.recordCount,a.pageCount=o.pager.pageCount,a.isExport=!0,a.exportFileName=o.option.exportFileName,a.exportType=t,a.exportAllData="1"==$("input[name*=dt_grid_export_export_all_data_"+t+"_"+o.option.id+"]:checked").val()?!0:!1,a.parameters=new Object,a.fastQueryParameters=new Object,a.advanceQueryConditions=new Array,a.advanceQuerySorts=new Array,o.parameters&&(a.parameters=o.parameters),o.fastQueryParameters&&(a.fastQueryParameters=o.fastQueryParameters),o.advanceQuery&&o.advanceQuery.advanceQueryConditions&&(a.advanceQueryConditions=o.advanceQuery.advanceQueryConditions),o.advanceQuery&&o.advanceQuery.advanceQuerySorts&&(a.advanceQuerySorts=o.advanceQuery.advanceQuerySorts);var r=new Array;$("input[id*=dt_grid_export_check_"+t+"_"+o.option.id+"_]:checked").each(function(){r.push(o.option.columns[this.value])}),a.exportColumns=r;var d=new Array,l=!1;a.exportAllData?(0==o.option.ajaxLoad||1==o.option.loadAll)&&(d=o.originalDatas,l=!0):(d=o.exhibitDatas,l=!0),a.exportDataIsProcessed=l;for(var s=new Array,p=0;p<d.length;p++){var c=d[p],u=new Object;$("input[id*=dt_grid_export_check_"+t+"_"+o.option.id+"_]:checked").each(function(){var t=o.option.columns[this.value],e=o.formatContent(t,c[t.id]);u[t.id]=e}),s.push(u)}a.exportDatas=s;var g=document.createElement("input");g.type="hidden",g.id="dtGridPager",g.name="dtGridPager",g.value=JSON.stringify(a),n.appendChild(g),e.appendChild(n),$("body").append(e),$("#dt_grid_export_form_"+t+"_"+o.option.id).submit(),$("#dtGridExport_"+t+"_"+o.option.id+"Modal").modal("hide")}),o.init.exportWindowIsInit[t]=!0,$("#dtGridExport_"+t+"_"+o.option.id+"Modal").modal("show")},getCheckedRecords:function(){dtGridReflectionObj=this;var t=new Array;return $("input[id*=dt_grid_"+dtGridReflectionObj.option.id+"_check_]:checked").each(function(){t.push(dtGridReflectionObj.exhibitDatas[this.value])}),t},reload:function(t){var o=this;t?o.load():(o.constructGrid(),o.constructGridPageBar())},refresh:function(t){var o=this;o.reload(t)}};return dtGridObject},tools:{guid:function(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=16*Math.random()|0,e="x"==t?o:3&o|8;return e.toString(16)})},getWindowStart:function(t,o){var e="";return e+='<div class="modal fade" id="'+t+'Modal" tabindex="-1" role="dialog" aria-labelledby="'+t+'ModalLabel" aria-hidden="true">',e+='	<div class="modal-dialog">',e+='		<div class="modal-content">',e+='			<div class="modal-header">',e+='				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',e+='				<h4 class="modal-title" id="'+t+'ModalLabel">'+o+"</h4>",e+="			</div>"},getWindowEnd:function(t,o){var e="";return e+='			<div class="modal-footer">',e+='				<button type="button" class="btn btn-default" data-dismiss="modal">',e+="					"+t,e+="				</button>",e+="				"+o,e+="			</div>",e+="		</div>",e+="	</div>",e+="</div>"},toastZIndex:1090,toastThread:null,toastFadeInAnimateTime:500,toastFadeOutAnimateTime:500,openToast:function(t,o,e){o=o?o:"info",e=e?e:3e3;var i="";"info"==o&&(i="text-primary"),"warning"==o&&(i="text-warning"),"error"==o&&(i="text-danger"),"success"==o&&(i="text-success"),clearTimeout($.fn.DtGrid.tools.toastThread),$(".toast").remove();var n='<div class="toast '+i+'" style="z-index:'+$.fn.DtGrid.tools.toastZIndex+'">'+t+"</div>";$("body").append(n);var a=$(window).width()/2-$(".toast").width()/2-20;$(".toast").css("left",a),$(".toast").fadeIn($.fn.DtGrid.tools.toastFadeInAnimateTime,function(){e&&($.fn.DtGrid.tools.toastThread=setTimeout($.fn.DtGrid.tools.removeToast,e))})},removeToast:function(){$(".toast").fadeOut($.fn.DtGrid.tools.toastFadeOutAnimateTime,function(){$(".toast").remove()})},toast:function(t,o,e){$.fn.DtGrid.tools.openToast(t,o,e)},toDate:function(t,o){o&&null!=o||(o="yyyy-MM-dd hh:mm:ss");var e={"y+":"y","M+":"M","d+":"d","h+":"h","m+":"m","s+":"s"},i={y:"",M:"",d:"",h:"00",m:"00",s:"00"},n=o;for(var a in e)new RegExp("("+a+")").test(o)&&(i[e[a]]=t.substring(n.indexOf(RegExp.$1),n.indexOf(RegExp.$1)+RegExp.$1.length));return new Date(i.y,i.M-1,i.d,i.h,i.m,i.s)},dateFormat:function(t,o){if(""==t)return"";t.time&&(t=new Date(t.time));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(o)&&(o=o.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return o},replaceAll:function(t,o,e){return t.replace(new RegExp(o,"gm"),e)},startsWith:function(t,o){return void 0==o?!1:0==t.indexOf(o)?!0:!1},endsWith:function(t,o){return void 0==o?!1:t.lastIndexOf(o)==t.length-o.length?!0:!1},equalsIgnoreCase:function(t,o){return new String(t.toLowerCase())==new String(o).toLowerCase()},numberFormat:function(t,o){var e="false",i=Number(t).toString();0==i.indexOf("-")&&(e="true",i=i.replace("-",""),t=-t);var n,a,r,d;if(""==$.trim(i))return"";if(/\./g.test(o)?(r=o.split(".")[0],d=o.split(".")[1]):(r=o,d=null),/\./g.test(i))if(null!=d){var l=Math.round(parseFloat("0."+i.split(".")[1])*Math.pow(10,d.length))/Math.pow(10,d.length);n=(Math.floor(t)+Math.floor(l)).toString(),a=/\./g.test(l.toString())?l.toString().split(".")[1]:"0"}else n=Math.round(t).toString(),a="0";else n=i,a="0";if(null!=r){var s="",p=r.match(/0*$/)[0].length,c=null;/,/g.test(r)&&(c=r.match(/,[^,]*/)[0].length-1);var u=new RegExp("(\\d{"+c+"})","g");n.length<p?(s=new Array(p+1).join("0")+n,s=s.substr(s.length-p,p)):s=n,s=s.substr(0,s.length%c)+s.substring(s.length%c).replace(u,(null!=c?",":"")+"$1"),s=s.replace(/^,/,""),n=s}if(null!=d){var g="",p=d.match(/^0*/)[0].length;if(a.length<p){g=a+new Array(p+1).join("0");var _=g.substring(0,p),f=g.substring(p,d.length);g=_+f.replace(/0*$/,"")}else g=0==a&&0==p?"":a.substring(0,d.length);a=g}else(""!=o||""==o&&"0"==a)&&(a="");return"true"==e?"-"+n+(""==a?"":"."+a):n+(""==a?"":"."+a)}}}}(jQuery),function(t){t.fn.DtGrid.defaultOptions={grid:{lang:"en",ajaxLoad:!0,loadAll:!1,loadURL:"",datas:null,check:!1,exportFileName:"datas",tableStyle:"",tableClass:"table table-bordered table-hover table-responsive",showHeader:!0,gridContainer:"dtGridContainer",toolbarContainer:"dtGridToolBarContainer",tools:"refresh|faseQuery|advanceQuery|export[excel,csv,pdf,txt]|print",exportFileName:"datas",exportURL:"/dtgrid/export",pageSize:20,pageSizeLimit:[20,50,100]},column:{id:"field",title:"field",type:"string",format:null,otype:null,oformat:null,columnStyle:"",columnClass:"",headerStyle:"",headerClass:"",hide:!1,hideType:"",extra:!0,codeTable:null,fastQuery:!1,fastQueryType:"",advanceQuery:!0,"export":!0,print:!0,resolution:null}}}(jQuery);